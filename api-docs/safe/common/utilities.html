


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module: safe.common.utilities &mdash; InaSAFE v0.5.0-alpha documentation</title>
    <link rel="stylesheet" href="../../../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../http://fonts.googleapis.com/css?family=Noticia+Text|Droid+Sans+Mono" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.5.0-alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../../../_static/toggle_sections.js"></script>
    <link rel="top" title="InaSAFE v0.5.0-alpha documentation" href="../../../index.html" />
    <link rel="up" title="Package::safe.common" href="../common.html" />
    <link rel="next" title="Module: safe.common.interpolation1d" href="interpolation1d.html" />
    <link rel="prev" title="Package::safe.common" href="../common.html" /> 
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="interpolation1d.html" title="Module: safe.common.interpolation1d"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../common.html" title="Package::safe.common"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../../../index.html">Home</a> &raquo;</li>
    <li><a href="../../../contents.html">Contents</a> &raquo;</li>

          <li><a href="../../index.html" >InaSAFE&#8217;s API documentation</a> &raquo;</li>
          <li><a href="../../safe.html" >Package::safe</a> &raquo;</li>
          <li><a href="../common.html" accesskey="U">Package::safe.common</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-safe.common.utilities">
<span id="module-safe-common-utilities"></span><h1>Module:  safe.common.utilities<a class="headerlink" href="#module-safe.common.utilities" title="Permalink to this headline">¶</a></h1>
<p>Utilities for InaSAFE</p>
<dl class="function">
<dt id="safe.common.utilities.setup_logger">
<tt class="descclassname">safe.common.utilities.</tt><tt class="descname">setup_logger</tt><big>(</big><big>)</big><a class="headerlink" href="#safe.common.utilities.setup_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Run once when the module is loaded and enable logging</p>
<p>Args: None</p>
<p>Returns: None</p>
<p>Raises: None</p>
<p>Borrowed heavily from this:
<a class="reference external" href="http://docs.python.org/howto/logging-cookbook.html">http://docs.python.org/howto/logging-cookbook.html</a></p>
<p>Use this to first initialise the logger (see safe/__init__.py):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">safe.common</span> <span class="kn">import</span> <span class="n">utilities</span>
<span class="n">utilities</span><span class="o">.</span><span class="n">setupLogger</span><span class="p">()</span>
</pre></div>
</div>
<p>You would typically only need to do the above once ever as the
safe modle is initialised early and will set up the logger
globally so it is available to all packages / subpackages as
shown below.</p>
<p>In a module that wants to do logging then use this example as
a guide to get the initialised logger instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The LOGGER is intialised in utilities.py by init</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;InaSAFE&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now to log a message do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;Some debug message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The file logs are written to the inasafe user tmp dir e.g.:
/tmp/inasafe/23-08-2012/timlinux/logs/inasafe.log</p>
</div>
</dd></dl>

<dl class="function">
<dt id="safe.common.utilities.temp_dir">
<tt class="descclassname">safe.common.utilities.</tt><tt class="descname">temp_dir</tt><big>(</big><em>sub_dir='work'</em><big>)</big><a class="headerlink" href="#safe.common.utilities.temp_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the temporary working directory for the operating system.</p>
<p>An inasafe subdirectory will automatically be created under this and
if specified, a user subdirectory under that.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can use this together with unique_filename to create
a file in a temporary directory under the inasafe workspace. e.g.</p>
<p class="last">tmpdir = temp_dir(&#8216;testing&#8217;)
tmpfile = unique_filename(dir=tmpdir)
print tmpfile
/tmp/inasafe/23-08-2012/timlinux/work/testing/tmpMRpF_C</p>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>sub_dir str - optional argument which will cause an additional</dt>
<dd>subirectory to be created e.g. /tmp/inasafe/foo/</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>Path to the output clipped layer (placed in the system temp dir).</dd>
<dt>Raises:</dt>
<dd>Any errors from the underlying system calls.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="safe.common.utilities.ugettext">
<tt class="descclassname">safe.common.utilities.</tt><tt class="descname">ugettext</tt><big>(</big><em>s</em><big>)</big><a class="reference internal" href="../../../_modules/safe/common/utilities.html#ugettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#safe.common.utilities.ugettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Translation support</p>
</dd></dl>

<dl class="function">
<dt id="safe.common.utilities.unique_filename">
<tt class="descclassname">safe.common.utilities.</tt><tt class="descname">unique_filename</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#safe.common.utilities.unique_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new filename guaranteed not to exist previously</p>
<p>Use mkstemp to create the file, then remove it and return the name</p>
<p>If dir is specified, the tempfile will be created in the path specified
otherwise the file will be created in a directory following this scheme:</p>
<p>:file:<a href="#id1"><span class="problematic" id="id2">`</span></a>/tmp/inasafe/&lt;dd-mm-yyyy&gt;/&lt;user&gt;/impacts&#8217;</p>
<p>See <a class="reference external" href="http://docs.python.org/library/tempfile.html">http://docs.python.org/library/tempfile.html</a> for details.</p>
<p>Example usage:</p>
<p>tempdir = temp_dir(sub_dir=&#8217;test&#8217;)
filename = unique_filename(suffix=&#8217;.keywords&#8217;, dir=tempdir)
print filename
/tmp/inasafe/23-08-2012/timlinux/test/tmpyeO5VR.keywords</p>
<p>Or with no preferred subdir, a default subdir of &#8216;impacts&#8217; is used:</p>
<p>filename = unique_filename(suffix=&#8217;.shp&#8217;)
print filename
/tmp/inasafe/23-08-2012/timlinux/impacts/tmpoOAmOi.shp</p>
</dd></dl>

<dl class="function">
<dt id="safe.common.utilities.verify">
<tt class="descclassname">safe.common.utilities.</tt><tt class="descname">verify</tt><big>(</big><em>statement</em>, <em>message=None</em><big>)</big><a class="reference internal" href="../../../_modules/safe/common/utilities.html#verify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#safe.common.utilities.verify" title="Permalink to this definition">¶</a></dt>
<dd><p>Verification of logical statement similar to assertions
Input</p>
<blockquote>
statement: expression
message: error message in case statement evaluates as False</blockquote>
<dl class="docutils">
<dt>Output</dt>
<dd>None</dd>
<dt>Raises</dt>
<dd>VerificationError in case statement evaluates to False</dd>
</dl>
</dd></dl>

<p>This module forms part of the <a class="reference external" href="http://inasafe.org">InaSAFE</a> tool.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../../../contents.html">
          <img class="logo" src="../../../_static/icon.png" alt="Logo"/>
        </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../common.html"
                        title="previous chapter">Package::safe.common</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interpolation1d.html"
                        title="next chapter">Module:  safe.common.interpolation1d</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/api-docs/safe/common/utilities.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="interpolation1d.html" title="Module: safe.common.interpolation1d"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../common.html" title="Package::safe.common"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../../../index.html">Home</a> &raquo;</li>
    <li><a href="../../../contents.html">Contents</a> &raquo;</li>

          <li><a href="../../index.html" >InaSAFE&#8217;s API documentation</a> &raquo;</li>
          <li><a href="../../safe.html" >Package::safe</a> &raquo;</li>
          <li><a href="../common.html" >Package::safe.common</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2012, BNPB/AIFDR/GFDRR.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
    <!-- cloud_sptheme 1.3 -->
  </body>
</html>